<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JUVELE - Moda Feminina</title>
    <link rel="shortcut icon" href="../fav.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./assets/styles/search-produto-card.css">
    <!-- CORREÇÃO: apontar para o arquivo correto de estilos da página de busca -->
    <link rel="stylesheet" href="./assets/styles/searchpage.css">
    <link rel="stylesheet" href="./assets/styles/footer(global).css">
    <link rel="stylesheet" href="./assets/styles/categorias0x1.css">

    <!-- mover Font Awesome para o head -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        crossorigin="anonymous">
</head>

<body>

    <!--PARTE DE CIMA Titulo, logotipo e Navbar-->
    <header class="search-header">
        <h1 class="search-title">Resultados da busca</h1>

        <p class="search-description">Encontre os produtos perfeitos para você! Filtre por categoria ou navegue pelas
            sugestões abaixo.</p>
        <div class="categorias-wrapper" aria-label="Categorias de produtos">
            <div id="categoriasList" class="categorias" role="list" tabindex="0"
                aria-label="Categorias (deslize para ver mais)">
                <div class="search-icon" aria-hidden="true">
                    <!-- NAV removido: será injetado por ../nav(globalcode).js -->
    </header>

    <!-- mantenha seu ícone atual aqui (ex.: <i class="fa fa-search"></i>) -->
    </div>

    <form id="siteSearch" class="search-bar" role="search" aria-label="Pesquisar no site" onsubmit="return false;">
        <input id="searchInput" type="search" placeholder="Pesquisar..." aria-label="Pesquisar" />
        <button id="searchSubmit" type="button" aria-label="Buscar">Buscar</button>
        <div id="searchResults" class="search-results" role="listbox" aria-hidden="true"></div>
    </form>

    <div class="container">
        <div id="produtosContainer" class="produtos-container" role="list"></div>
        <div id="produtosErro" class="produtos-erro" role="status" aria-live="polite" hidden>
            Não foi possível carregar os produtos no momento.
        </div>
    </div>

    <!-- Container para os cartões de produto (será preenchido pelo script abaixo) -->
    <main id="searchResultsContainer" class="products-grid" aria-live="polite"></main>

    <!-- pr-def deve ser carregado antes de nav.js -->
    <script src="./assets/javascript/pr-def.js"></script>
    <!-- injeta o markup da nav (com ajustes de href e estilos injetados) -->
    <script src="./assets/javascript/nav(globalcode).js"></script>
    <!-- lógica do menu/search que depende de pr-def.js -->
    <script src="./assets/javascript/nav.js"></script>
    <script src="./assets/javascript/produto-destaque.js"></script>
    <script src="./assets/javascript/search-results.js"></script>
    <script src="./assets/javascript/footer(global).js"></script>

    <!-- Estilos adicionais para página de pesquisa -->
    <style>
        body {
            background: #faf9f6;
            font-family: 'Montserrat', sans-serif;
        }

        .search-header {
            text-align: center;
            /* centraliza título e descrição */
            margin-bottom: 2rem;
            display: block;
        }

        .search-title {
            font-size: 1.8rem;
            font-weight: 400;
            color: #5b3142;
            margin: 0.5rem 0;
            font-family: 'Montserrat', sans-serif;
            margin-left: 0;
            /* remove margem à esquerda */
        }

        .search-description {
            color: #222222;
            font-size: 0.9rem;
            max-width: 600px;
            /* aumenta largura para melhor leitura quando centralizado */
            margin: 0.25rem auto 1.5rem;
            /* centraliza horizontalmente */
            font-family: Arial, Helvetica, sans-serif;
        }

        .back-link {
            display: inline-block;
            margin-top: 1rem;
            color: #d16e8d;
            text-decoration: none;
            font-weight: 500;
        }

        .back-link i {
            margin-right: 6px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
            padding: 2rem 1rem;
            max-width: 1100px;
            margin-top: -70px;
        }

        /* ...adapte estilos dos cards conforme necessário... */
    </style>

    <!-- Script para filtrar por categoria (exemplo básico) -->
    <script>
        const searchInput = document.getElementById('searchInput');
        const searchSubmit = document.getElementById('searchSubmit');
        const searchTitle = document.querySelector('.search-title');
        const searchDescription = document.querySelector('.search-description');

        function updateSearchText(q) {
            const trimmed = (q || '').trim();
            if (trimmed) {
                searchTitle.textContent = `Resultados da busca`;
                searchDescription.textContent = `Resultados encontrados para "${trimmed}". Filtre por categoria ou navegue pelas sugestões abaixo.`;
            } else {
                searchTitle.textContent = 'Resultados da busca';
                searchDescription.textContent = 'Encontre os produtos perfeitos para você! Filtre por categoria ou navegue pelas sugestões abaixo.';
            }
        }

        // Atualiza apenas ao clicar no botão Buscar
        searchSubmit.addEventListener('click', () => updateSearchText(searchInput.value));

        // Evita que a tecla Enter dispare alguma atualização (somente botão deve atualizar)
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
            }
        });

        // Preenche a busca a partir da query string (ex.: ?q=vestido) ao carregar a página
        const params = new URLSearchParams(window.location.search);
        if (params.has('q')) {
            const q = params.get('q');
            searchInput.value = q;
            // Mantém a atualização inicial quando a página é aberta com ?q=
            updateSearchText(q);
        }
    </script>
    <script src="./assets/javascript/categorias0x1.js"></script>
</body>

</html>